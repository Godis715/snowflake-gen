<html>

<head>
    <title>Snowflakes</title>
</head>

<body>
    <h1>Snowflake generator demo</h1>
    <div>
        <svg width="200" height="200" viewBox="-1.5 -1.5 3 3">
            <g id="snowflake" fill="rgba(80, 180, 240, 0.3)"></g>
            <g id="snowflake2" fill="rgb(50, 120, 255)"></g>
        </svg>
        <button id="gen-btn">Generate</button>
    </div>
</body>
<script src="../dist/index.js"></script>
<script>
    function drawSvgPolygon(polygon) {
        const dAttr = polygon.map(
            (contour) => contour
                .map((p, i) => (i === 0 ? "M" : "L") + p.join(" "))
                .join(" ")
                .concat("z")
        ).join(" ");

        return `<path d="${dAttr}" />`;
    }

    function drawMultiSvgPolygon(multipolygon) {
        return multipolygon.map(drawSvgPolygon).join("\n")
    }

    const snowflakeSvg = document.getElementById("snowflake");
    const snowflakeSvg2 = document.getElementById("snowflake2");
    const genButton = document.getElementById("gen-btn");

    function updateSnowflake() {
        const snowflake = generateSnowflake({
            seed: Math.random()
        });

        const snowflake2 = generateSnowflake({
            seed: Math.random(),
            minShapeSize: 0.1,
            maxShapeSize: 0.3,
            shapesNum: 3
        });

        snowflakeSvg.innerHTML = drawMultiSvgPolygon(snowflake);
        snowflakeSvg2.innerHTML = drawMultiSvgPolygon(snowflake2);
    }

    genButton.addEventListener("click", updateSnowflake);

    updateSnowflake();
</script>

</html>